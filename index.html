<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MyNameis</title>
  <link rel="stylesheet" href="./assets/app.css" />
</head>
<body>
  <!-- Loading -->
  <div id="loading" role="status" aria-live="polite">
    <div class="dot"><i></i><i></i><i></i></div>
    <div id="loadingText">불러오고 있어요</div>
  </div>

  <!-- Card -->
  <main id="content" role="main" aria-label="소개 카드" aria-busy="true">
    <div class="top">
      <img id="profileImg" alt="프로필" />
    </div>
    <div class="bottom">
      <h1 id="displayName">마이 네임</h1>
      <div class="tags" id="tagsWrap"></div>
      <div class="btns" id="btnsWrap"></div>
    </div>
  </main>

  <!-- Floating -->
  <div class="fab">
    <button id="authBtn" class="auth" title="로그인">👤</button>
    <button id="settingsBtn" title="설정">⚙️</button>
  </div>

  <!-- Settings Panel -->
  <aside id="panel" class="panel" aria-label="설정">
    <div class="ph">
      <strong>패널 설정</strong>
      <div class="actions">
        <button id="btnReset" class="small">기본값</button>
        <button id="btnSave" class="small primary">저장</button>
      </div>
    </div>
    <div class="pb">
      <div class="row-2">
        <div>
          <label>페이지 타이틀</label>
          <input id="titleInput" type="text" placeholder="브라우저 탭 제목" />
        </div>
        <div>
          <label>로딩 문구</label>
          <input id="loadingMsgInput" type="text" placeholder="불러오는 동안 보일 문구" />
        </div>
      </div>

      <div class="row">
        <label>디스플레이 이름</label>
        <input id="nameInput" type="text" placeholder="카드에 표시할 이름" />
      </div>

      <!-- 이미지(파일 업로드 → dataURL 저장) -->
      <div class="row">
        <label>배경 이미지 (파일 선택)</label>
        <input id="bgText" type="text" placeholder="파일 선택 후 자동 채움" readonly />
        <input id="bgFile" type="file" accept="image/*" class="color" />
      </div>
      <div class="row">
        <label>배너 이미지 (파일 선택)</label>
        <input id="bannerText" type="text" placeholder="파일 선택 후 자동 채움" readonly />
        <input id="bannerFile" type="file" accept="image/*" class="color" />
      </div>
      <div class="row">
        <label>프로필 이미지 (파일 선택)</label>
        <input id="profileText" type="text" placeholder="파일 선택 후 자동 채움" readonly />
        <input id="profileFile" type="file" accept="image/*" class="color" />
      </div>

      <!-- 로딩/오버레이/그림자 색 -->
      <div class="row-2">
        <div>
          <label>로딩 배경 색 (CSS Color)</label>
          <input id="loadingBgInput" type="text" placeholder="rgba(239,244,255,0.9) / #eff4ffcc" />
          <input id="loadingBgPicker" type="color" class="color" />
        </div>
        <div>
          <label>로딩 공 색 (CSS Color)</label>
          <input id="loadingDotInput" type="text" placeholder="#5865F2" />
          <input id="loadingDotPicker" type="color" class="color" />
        </div>
      </div>
      <div class="row-2">
        <div>
          <label>배경 오버레이 색 (CSS Color)</label>
          <input id="overlayInput" type="text" placeholder="rgba(255,255,255,0.35)" />
          <input id="overlayPicker" type="color" class="color" />
        </div>
        <div>
          <label>카드 그림자 색 (CSS Color)</label>
          <input id="shadowInput" type="text" placeholder="rgba(0,0,0,0.25)" />
          <input id="shadowPicker" type="color" class="color" />
        </div>
      </div>

      <!-- 태그 -->
      <div class="row">
        <label>태그</label>
        <div id="tagsList" class="list"></div>
        <button id="addTag" class="small">+ 태그 추가</button>
        <div class="note">그림자 색을 비우면 태그 색과 동일합니다.</div>
      </div>

      <!-- 버튼 -->
      <div class="row">
        <label>버튼</label>
        <div id="linksList" class="list"></div>
        <button id="addLink" class="small">+ 버튼 추가</button>
        <div class="note">버튼은 “이름+링크(URL)”만 입력.</div>
      </div>

      <hr/>

      <!-- 공개 슬러그 -->
      <div class="row-2">
        <div>
          <label>공개 슬러그(링크) — 영문/숫자/_/-, 3~32자</label>
          <input id="slugInput" type="text" placeholder="예: yunha, 0yunha1, my-name" />
        </div>
        <div style="align-self:end">
          <button id="publishSlug" class="small primary">슬러그 게시</button>
        </div>
      </div>
      <div class="note">접속: <code>https://도메인/@슬러그</code> 또는 <code>https://도메인/슬러그</code> (Render는 리라이트, GitHub Pages는 404.html 트릭)</div>

      <div class="row">
        <label>공유/백업</label>
        <div class="share">
          <button id="previewBtn" class="small">미리보기</button>
          <button id="saveCloud" class="small">계정 저장</button>
          <button id="loadCloud" class="small">계정 불러오기</button>
          <button id="createShort" class="small">짧은 링크</button>
        </div>
      </div>
    </div>
  </aside>

  <!-- Auth Modal -->
  <div id="authModal" class="modal" aria-hidden="true">
    <div class="mc">
      <div class="mh">
        <strong>로그인 / 회원가입</strong>
        <button id="authClose" class="small">닫기</button>
      </div>
      <div class="row">
        <label>이메일</label>
        <input id="email" type="email" placeholder="you@example.com" autocomplete="email"/>
      </div>
      <div class="row">
        <label>비밀번호</label>
        <input id="pw" type="password" placeholder="8자 이상" autocomplete="current-password"/>
      </div>
      <div class="note">※ 회원가입 시 <b>이메일 인증</b> 후 로그인 가능합니다.</div>
      <div class="auth-actions">
        <button id="sendReset" class="small">재설정 메일</button>
        <button id="btnRegister" class="small primary">회원가입</button>
        <button id="btnLogin" class="small primary">로그인</button>
        <button id="btnLogout" class="small" style="display:none">로그아웃</button>
      </div>
    </div>
  </div>

  <!-- Supabase: 네 프로젝트 값으로 교체 -->
  <script>
    window.__SUPABASE_URL__ = "";      // 예: "https://xxxx.supabase.co"
    window.__SUPABASE_ANON_KEY__ = "";  // 예: "eyJhbGciOi..."
  </script>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="./assets/app.js"></script>
</body>
</html>
